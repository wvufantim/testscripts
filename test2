#!/bin/bash

# Install apt-file if it's not already installed
if ! command -v apt-file > /dev/null; then
    echo "apt-file is not installed, installing it now..."
    sudo apt-get install apt-file
    apt-file update
fi

while true; do
    echo "1. Install Programs"
    echo "2. Uninstall Programs"
    echo "3. Exit"
    read -p "Please select an option: " option
    case $option in
        1)
            read -p "Enter programs to install (separated by spaces): " programs_to_install
            for program in $programs_to_install; do
                if ! dpkg-query -W -f='${Status}' "$program" 2>/dev/null | grep -c "ok installed" > /dev/null; then
                    if ! apt-cache search "$program" | grep -q "$program"; then
                        echo "Program not found. Here are some suggestions:"
                        apt-file search "$program" | awk '{print $1}'
                    else
                        sudo apt-get install -y "$program"
                    fi
                fi
            done
            ;;
        2)
            read -p "Enter programs to uninstall (separated by spaces): " programs_to_uninstall
            for program in $programs_to_uninstall; do
                if dpkg-query -W -f='${Status}' "$program" 2>/dev/null | grep -c "ok installed" > /dev/null; then
                    sudo apt-get remove -y "$program"
                fi
            done
            ;;
        3)
            exit
            ;;
        *)
            echo "Invalid option"
            ;;
    esac
done
