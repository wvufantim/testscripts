#!/bin/bash

# list of programs to install
programs_to_install=("program1" "program2" "program3")

# list of flatpaks to install
flatpaks_to_install=("flatpak1" "flatpak2" "flatpak3")

# function to install apt programs
install_programs() {
    for program in "${programs_to_install[@]}"; do
        if ! dpkg-query -W -f='${Status}' "$program" 2>/dev/null | grep -c "ok installed" > /dev/null; then
            sudo apt-get install -y "$program"
        fi
    done
}

# function to uninstall apt programs
uninstall_programs() {
    for program in "${programs_to_install[@]}"; do
        if dpkg-query -W -f='${Status}' "$program" 2>/dev/null | grep -c "ok installed" > /dev/null; then
            sudo apt-get remove -y "$program"
        fi
    done
}

# function to install flatpaks
install_flatpaks() {
    for flatpak in "${flatpaks_to_install[@]}"; do
        if ! flatpak list --app --columns=application | grep -q "$flatpak"; then
            flatpak install flathub "$flatpak"
        fi
    done
}

# function to uninstall flatpaks
uninstall_flatpaks() {
    for flatpak in "${flatpaks_to_install[@]}"; do
        if flatpak list --app --columns=application | grep -q "$flatpak"; then
            flatpak uninstall "$flatpak"
        fi
    done
}

# function to remove snaps
remove_snaps() {
    if dpkg-query -W -f='${Status}' snapd 2>/dev/null | grep -c "ok installed" > /dev/null; then
        sudo snap list --all | awk '/disabled/{print $1, $3}' |
        while read snapname revision; do
            sudo snap remove "$snapname" --revision="$revision"
        done
        sudo apt-get remove -y snapd
    fi
}

echo "1. Install apt programs"
echo "2. Uninstall apt programs"
echo "3. Install Flatpaks"
echo "4. Uninstall Flatpaks"
echo "5. Remove Snaps"
read -p "Please select an option: " option

case $option in
    1) install_programs;;
    2) uninstall_programs;;
    3) install_flatpaks;;
    4) uninstall_flatpaks;;
    5) remove_snaps;;
    *) echo "Invalid option";;
esac
